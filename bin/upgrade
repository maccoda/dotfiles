#!/usr/local/bin/fish
echo "Pulling updates for dotfiles..."
cd $HOME/.dotfiles
git submodule update --recursive --remote
gpr

switch (uname -s)

   case Darwin
      echo "Detected MacOS. Running MacOS specific managers..."

   case Linux
      echo "Detected Linux. Running Linux specific managers..."
      sudo apt-get update -q
      sudo apt-get upgrade -qy
      sudo apt-get autoremove -qy

   case '*'
     echo 'Unknown OS'
     exit 1
end

echo "Updating brew taps..."
brew upgrade
brew cleanup

echo "Updating fisher packages..."
fish -c "fisher"
fish -c "fisher self-update"

echo "Updating rust..."
rustup update

echo "Updating vim..."
nvim +PlugUpdate +qall
nvim +PlugClean +qall

source $HOME/bin/work-upgrade
